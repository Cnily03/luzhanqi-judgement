const input_sid=document.querySelector("input[name='sid']");input_sid.oninput=input_sid.onpropertychange=()=>{input_sid.value=input_sid.value.replace(/[^a-z0-9]/gi,"")};const dom_form=document.querySelector("form#operate-room"),dom_form_create=document.querySelector("form#operate-room input[name='create']"),dom_form_join=document.querySelector("form#operate-room input[name='join']");dom_form_create.onclick=()=>{var o=getFormData(dom_form);xmlhttpRequest({url:"/operate/createRoom",data:JSON.stringify(o),responseType:"json",method:"POST",onload:o=>{o=o.response;o.error.code?alert(o.error.message):window.open(o.url)},onerror:()=>{alert("\u8fde\u63a5\u8d85\u65f6")}})},dom_form_join.onclick=()=>{var o=getFormData(dom_form);xmlhttpRequest({url:"/operate/getRoom",data:JSON.stringify(o),responseType:"json",method:"POST",onload:o=>{o=o.response;o.error.code?alert(o.error.message):window.open(o.url)},onerror:()=>{alert("\u8fde\u63a5\u8d85\u65f6")}})},dom_form.onsubmit=()=>{var o=getFormData(dom_form);xmlhttpRequest({url:"/operate/createRoom",data:JSON.stringify(o),responseType:"json",method:"POST",onload:o=>{o=o.response;"REPEATED_SID"===o.error.code?dom_form_join.click():window.open(o.url)},onerror:()=>{alert("\u8fde\u63a5\u8d85\u65f6")}})};